{
	"id": "http://api.npolar.no/schema/lab-biomarker",
	"$schema": "http://json-schema.org/draft-04/schema",
	"title": "Biomarker lab results",
	"description": "Norwegian Polar Institute's biomarker lab results database.",
	"type": "object",
	"required": [
		"id",
		"schema"
	],
	"properties": {
		"id": {
			"description": "Resource identifier (UUID).",
			"type": "string"
		},
		"schema": {
			"description": "Schema defining this object (this schema).",
			"type": "string",
			"enum": [
				"http://api.npolar.no/schema/lab-biomarker"
			]
		},
		"lang": {
			"description": "The language of the document",
			"type": "string",
			"default": "en",
			"pattern": "^[a-z]{2}$"
		},
		"laboratory": {
			"description": "Name of laboratory performing analysis",
			"enum": ["UiT"],
			"type": "string"
		},
		"date_report": {
			"description": "Date of the report/data analyses finished",
			"format": "date-time",
			"type": "string"
		},
		"excel": {
			"description": "Original excel file(s)",
			"type": "array",
			"additionalItems": false,
			"items": {
				"type": "object",
				"additionalProperties": false,
				"properties": {
					"excel_uri": {
						"description": "Uri to excel form",
						"type": "string",
						"format": "uri"
					},
					"excel_filename": {
						"description": "Excel filename",
						"type": "string"
					},
					"excel_type": {
						"description": "Excel type",
						"type": "string"
					},
					"excel_length": {
						"description": "Excel file length",
						"type": "integer"
					}
				}
			}
		},
		"sample_collection":{
			"title": "List of all entries corresponding to excel rows",
			"type": "array",
			"additionalItems": false,
			"items": {
				 "sample_name": {
					 "description": "Collection of the same sample run through analysis a number of times",
					 "type": "integer"
				 },
				 "sample": {
						"title": "List of all entries corresponding to excel rows",
						"type": "array",
						"additionalItems": false,
						"items": {
							"type": "object",
							"additionalProperties": false,
							"properties": {
								"matrix": {
									"description": "matrix or tissue analysed by the lab",
									"enum": [
										"egg",
										"milk",
										"whole blood",
										"blood cell",
										"plasma",
										"serum",
										"abdominal fat",
										"subcutaneous fat",
										"blubber",
										"hair",
										"feather",
										"muscle",
										"liver",
										"brain",
										"adrenal",
										"whole animal",
										"gonad",
										"whole animal except lower part of foot",
										"whole animal except closing muscle and siphon",
										"digestive gland"
									],
									"type": "string"
								},
			          "species": {
			            "description": "Species",
			            "type": "string"
			          },
				  		  "NPI_sample_id": {
										"description": "Sample ID used by NPI",
										"type": "string"
					  		},
				  		  "lab_sample_id": {
										"description": "Sample ID used by the lab (if not the same as NPI_sample_id)",
										"type": "string"
					  		},
				  			"biomarker_category": {
										"description": "Category of biomarker",
										"type": "string",
										"enum": [

											]
								},
								"biomarker": {
										"description": "Type of biomarker",
										"type": "string",
										"enum": [
											"cholesterol",
											"triglycerides",
											"EROD",
											"retinol",
											"retinyl_palmitate",
											"resorufin",
											"testosterone_6B",
											"uro_porphyrin",
											"hepta_porphyrin",
											"hexa_porphyrin",
											"penta_porphyrin",
											"copro_porphyrin",
											"proto_porphyrin"
										]
									},
								"value": {
										"description": "Measured value for biomarker",
										"type": ["number", "null"]
								},
								"efficiency": {
										"description": "Efficiency for gene expressions",
										"type": ["number", "null"]
								},
								"unit": {
										"description": "Unit of biomarker value",
										"type": ["string", "null"]
								},
								"detection_limit": {
										"description": "Smallest concentration detectable (LOD)",
										"type": ["string", "null"]
								},
								"level_of_quantification": {
										"description": "The amount measured above this limit is more accurate (LOQ)",
										"type": ["string", "null"]
								},
			          "comment": {
			            	"description": "Sample comment",
			            	"type": ["string","null"]
			          },
								"links": {
            "type": "array",
            "additionalItems": false,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "rel": {
                  "type": "string",
                  "enum": [
                    "data"
                  ]
                },
                "href": {
									"description": "The actual link either to ecotox-fieldwork or marine-biology-sample",
                  "type": "string",
                  "format": "uri"
                },
                "title": {
									"description": "Title of linked resource",
                  "type": "string",
									"enum": [
										"collected sample"
									]
                },
                "hreflang": {
									"description": "Language of the linked resource",
                  "type": "string",
									"enum": [
										"collected sample"
									]
                },
                "type": {
									"description": "Mime-type of linked resource",
                  "type": "string"
                }
              }
            }
          }
							}
				}
			}}
		},
		"collection": {
				"description": "The storage collection the document belongs to.",
				"type": "string",
				"enum": [
					"lab-biomarker"
				]
		},
		"created": {
				"description": "The date the document was created.",
				"type": "string",
				"format": "date-time"
		},
		"updated": {
				"description": "The date the document was last updated.",
				"type": "string",
				"format": "date-time"
		},
		"created_by": {
				"description": "The username of the person who first created the document in the system.",
				"type": "string"
		},
		"updated_by": {
				"description": "The username of the person who last updated the document in the system.",
				"type": "string"
		},
		"_id": {
				"description": "Internal resource identifier.",
				"type": "string"
		},
		"_rev": {
				"description": "Internal revision number.",
				"type": "string"
		},
		"_deleted": {
				"description": "Deleted entry",
				"type": "string"
		},
		"@context": {
			"NPI_sample_id": {
				"@id": "https://api-test.data.npolar.no/ecotox-fieldwork/?q=&filter-NPI_sample_id="
			}
		}
	}
}
